<!DOCTYPE html>
<html>

<head>
    <title>TissUUmaps</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <script src="js/d3.v4.min.js"></script>
    <script src="js/d3-scale-chromatic.v0.3.min.js"></script>
    <script src="js/jquery-3.4.1.slim.min.js"></script>
    <link rel="stylesheet" href="css/tmcpmain.min.css">
    <link rel="stylesheet" href="css/TissueMapsTheme.css">
    <link rel="stylesheet" href="css/tm-icon-style.css">    
</head>

<body>
    <div class="navbar navbar-default">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-responsive-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://tissuumaps.research.it.uu.se/"><img 
                style="height:50px; margin-top:-15px; overflow: visible; z-index: 9999;"
                src="uulogowhitetuum.png"> </a>
        </div>
        <div class="navbar-collapse collapse navbar-responsive-collapse">
            <ul class="nav navbar-nav">
                <li>
                    <a id="project_title" href "#"> Slide A</a>
                </li>
            </ul>
            <!-- Show ImageName, Z-level, and Zoom-->
            <ul class="nav navbar-nav">
				<li class="nav-item"><a>Image: <span id="img_name"> -</span></a></li>	
                <li class="nav-item"><a> Z-level: <span id="img_zlevel"> -</span></a></li>
                <li class="nav-item"><a> Zoom: <span id="img_zoom"> -</span></a></li>	
			</ul> 
        </div>
    </div>

    <div class="container-fluid">

        <!-- The main viewer -->
        <div class="col-xs-8"> <!-- Each class scales up, so if you wish to set the same widths for xs and sm, you only need to specify xs. -->
            <!-- The id is what OSD will look for to draw the viewer, the class is our own css to stylize 
                 The ID will give the prefix for all the objects related to the viewer in this case ISS-->
            <div id="ISS_viewer" class="ISS_viewer"></div>
        </div>
        
        <div class="col-xs-4" style="padding: 15px;">
            <div class="row">
                <div class="table-wrapper-scroll-y my-custom-scrollbar">
                <table id="tmcptable" class="table-striped table-bordered" style="padding: 10px; width: 100%; text-align: center;" >
                    <col width="10%"><col width="50%"> <col width="50%">
                    <thead align="center" >
                        <tr align="center" >
                            <th class="text-center" >ID</th>
                            <th class="text-center" id="thimg1">img1</th>
                        </tr>
                    </thead>              
                    
                    <tbody id="tmcptablebody">
                    </tbody>
                </table>
                </div>
            </div>
        </div>
            
        <div class="col-xs-4" style="padding: 15px">               
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h3 class="panel-title">Options</h3>
                </div>
                <div class="panel-body">
                    <div class="row" style="padding: 10px">
                        <div class="col-xs-7">
                            <div class="btn-group btn-group-toggle" data-toggle="buttons">
                                <label class="btn btn-success active" id="class0"> <!-- The 'click' happens in the lable! -->
                                    <input type="radio" name="class_options" autocomplete="off" checked=""> Class 0
                                </label>
                                <label class="btn btn-warning" id="class1">
                                    <input type="radio" name="class_options" autocomplete="off"> Class 1
                                </label>
                                <label class="btn btn-danger" id="class2">
                                    <input type="radio" name="class_options" autocomplete="off"> Class 2
                                </label>
                            </div>
                        </div>
                        
                        <div class="col-xs-5">Focus: 
                            <button id="focus_next" class="btn btn-primary" type="button"> Up</button>
                            <button id="focus_prev" class="btn btn-primary" type="button"> Down</button>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-xs-3">
                            <button id="pointstojson" class="btn btn-primary" type="button"> Download</button>
                        </div>
                        <div class="col-xs-4">
                            <input class="form-control-file form-control form-control-sm" type="file" id="data_files_import" name="files[]">
                        </div>
                        <div class="col-xs-1">
                                <input type="file" id="fileElem" multiple accept="image/*" style="display:none" onchange="handleFiles(this.files)">
                            <button id="jsontodata" class="btn btn-primary" type="button"> Import </button>
                        </div>                            
                    </div>
                    <div class="row" style="padding: 15px">
                        <textarea class="form-control" rows="10" id="jsonpoints"></textarea>
                    </div>
                </div>                    
            </div>                
        </div>
    </div><!-- end of container-fuild-->
</body>

<script src="js/bootstrap.4.0.0.bundle.min.js" ></script>
<script src="js/openseadragon.2.4.0.min.js"></script>
<script src="js/openseadragon-filtering.js"></script>
<script src="js/openseadragon-svg-overlay.js"></script>
<script src="js/utils/interfaceUtils.js"></script>
<script src="js/utils/dataUtils.js"></script>
<script src="js/utils/CPDataUtils.js"></script>
<script src="js/utils/markerUtils.js"></script>
<script src="js/utils/OSDViewerUtils.js"></script>
<script src="js/utils/HTMLElementUtils.js"></script>
<script src="js/utils/regionUtils.js"></script>
<script src="js/utils/overlayUtils.js"></script>
<script src="js/utils/geometryUtils.js"></script>
<script src="js/tmapp.js"></script>
<script>

    document.getElementById("project_title").innerText = "Cyto Browser";

    // Start our tmapp
    $(document).ready(function () {
        var url = new URL(window.location.href);
        tmapp.fixed_file = url.searchParams.get("image"); //TODO: Give sensible error message if "image" key is missing
        tmapp.registerActions();
        tmapp.init();
    });

    // UI setters
    function setImageName(txt) {
        document.getElementById("img_name").innerText=txt;
    }
    function setImageZLevel(txt) {
        document.getElementById("img_zlevel").innerText=txt;
    }    
    function setImageZoom(txt) {
        document.getElementById("img_zoom").innerText=txt;
    }

</script>
</html>
